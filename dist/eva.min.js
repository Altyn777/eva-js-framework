!function(e){var t={};function r(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(module,exports,__webpack_require__){"use strict";(function(process,global){const eva_framework_version="0.1.19";(()=>{if("undefined"!=typeof window)var fetch=window.fetch,WebSocket=window.WebSocket;else if(void 0!==process&&"browser"!==process.title)var fetch=__webpack_require__(5),WebSocket=__webpack_require__(6);const jsaltt=__webpack_require__(2),cookies=__webpack_require__(8);class EVA{constructor(){this.version=eva_framework_version,this.login="",this.password="",this.apikey="",this.api_uri="",this.set_auth_cookies=!0,this.global_cvars=!0,this.api_token="",this.authorized_user=null,this.logged_in=!1,this.debug=!1,this.state_updates=!0,this.ws_mode=void 0!==WebSocket,this.ws=null,this.log={level:20,records:200},this._handlers={"heartbeat.error":this.restart},this._intervals={ajax_reload:2,ajax_log_reload:2,heartbeat:5,reload:5,restart:1},this.log_level_names={10:"DEBUG",20:"INFO",30:"WARNING",40:"ERROR",50:"CRITICAL"},this._heartbeat_reloader=null,this._ajax_reloader=null,this._log_reloader=null,this._scheduled_restarter=null,this._update_state_functions=[],this._update_state_mask_functions=[],this._clear()}_clear(){this.server_info=null,this.tsdiff=null,this._states=[],this._cvars={},this._log_subscribed=!1,this._log_first_load=!0,this._log_loaded=!1,this._log_started=!1,this._lr2p=[],this._last_ping=null,this._last_pong=null}start(){if(this._cancel_scheduled_restart(),this._debug("framework",`version: ${this.version}`),void 0===fetch)return jsaltt.logger.error('"fetch" function is unavailable. Upgrade your web browser or connect polyfill (lib/polyfill/fetch.js)'),!1;if(this.logged_in)return this._debug("start","already logged in"),!0;this._last_ping=null,this._last_pong=null;var e={};if(this.apikey)e={k:this.apikey},this._debug("start","logging in with API key");else if(this.password)e={u:this.login,p:this.password},this._debug("start","logging in with password");else if(this.set_auth_cookies){var t=cookies.read("auth");t?(e={a:t},this._debug("start","logging in with auth token")):this._debug("start","logging in without credentials")}var r,o=this;return this._api_call("login",e).then(function(e){return o.api_token=e.token,r=e.user,o._set_token_cookie(),Promise.all([o._load_states(),o._heartbeat(o,!0),o._start_ws()])}).then(function(){o.ws_mode?(o._ajax_reloader&&clearInterval(o._ajax_reloader),o._intervals.reload&&(o._ajax_reloader=setInterval(function(){o._load_states(o).then(function(){}).catch(function(e){})},1e3*o._intervals.reload))):(o._ajax_reloader&&clearInterval(o._ajax_reloader),o._ajax_reloader=setInterval(function(){o._load_states(o).then(function(){}).catch(function(e){})},1e3*o._intervals.ajax_reload)),o._heartbeat_reloader&&clearInterval(o._heartbeat_reloader),o._heartbeat_reloader=setInterval(function(){o._heartbeat(o).then(function(){}).catch(function(){})},1e3*o._intervals.heartbeat),o._debug("start",`login successful, user: ${r}`),o.logged_in=!0,o.authorized_user=r,o._invoke_handler("login.success")}).catch(function(e){o.logged_in=!1,void 0===e.code&&(e.code=4,e.message="Unknown error"),o._debug("start",`login failed: ${e.code} (${e.message})`),o._stop_engine(),o.erase_token_cookie(),o._invoke_handler("login.failed",e)}),!0}log_start(e){if(this._log_started=!0,void 0!==e&&(this.log.level=e),(!this.ws_mode||this._log_first_load)&&(this._log_loaded=!1,this._load_log_entries(!0),!this.ws_mode)){var t=this;this._log_reloader=setInterval(function(){t._load_log_entries(!1,t)},1e3*this._intervals.ajax_log_reload)}}log_level(e){this.log.level=e,this._set_ws_log_level(e),this._load_log_entries(!0)}restart(){this._cancel_scheduled_restart(),this._debug("restart","performing restart");var e=this;this.stop(!0).then(function(){e._schedule_restart()}).catch(function(){e._schedule_restart()})}erase_token_cookie(){this.api_token="",this.authorized_user=null,this._set_token_cookie()}call(e,t,r){var o;"string"==typeof t||Array.isArray(t)?(o=jsaltt.extend({},r)).i=t:o=t;var a=this._prepare_call_params(o);return this._api_call(e,a)}on(e,t){this._handlers[e]=t,this._debug("on","setting handler for "+e)}interval(e,t){this._intervals[e]=t}cvar(e){return this._cvars[e]}watch(e,t){if(e.includes("*")){e in this._update_state_mask_functions||(this._update_state_mask_functions[e]=[]),this._update_state_mask_functions[e].push(t);var r=this.state(e);Array.isArray(r)?r.map(t):t(r)}else{e in this._update_state_functions||(this._update_state_functions[e]=[]),this._update_state_functions[e].push(t);var o=this.state(e);void 0!==o&&t(o)}}status(e){var t=this.state(e);if(null!=t)return t.status}value(e){var t=this.state(e);if(null!=t)return Number(t.value)==t.value?Number(t.value):t.value}state(e){if(!e.includes("*"))return e in this._states?this._states[e]:void 0;var t=[];return Object.keys(this._states).map(function(r){this._oid_match(r,e)&&t.push(this._states[r])},this),t}expires_in(e){var t=this.state((e.startsWith("lvar:")?"":"lvar:")+e);if(void 0!==t){if(void 0===t.expires||0==t.expires)return null;if(null!=this.tsdiff){if(0==t.status)return-2;if(-1==t.status)return-1;var r=t.expires-(new Date).getTime()/1e3+this.tsdiff+t.set_time;return r<0&&(r=0),r}}}stop(e){var t=this;return new Promise(function(r,o){t._stop_engine(),t.logged_in=!1,t.call("logout").then(function(){e||t.erase_token_cookie(),r()}).catch(function(r){e||t.erase_token_cookie(),o(r)})})}_uuidv4(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})}_api_call(e,t){var r=this._uuidv4(),o=this.api_uri+"/jrpc",a=this;return this._debug("_api_call",`${r}: ${o}: ${e}`),new Promise(function(s,n){var i={jsonrpc:"2.0",method:e,params:t,id:r};fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"error",body:JSON.stringify(i)}).then(function(e){if(e.ok)a._debug("_api_call",r+" success"),e.json().then(function(e){!1 in e||e.id!=r||!1 in e&&!1 in e?n({code:9,message:"Invalid server response",data:e}):"error"in e?(a._debug("_api_call",`${r} failed: ${e.error.code} (${e.error.message})`),n({code:e.error.code,message:e.error.message,data:e})):s(e.result)}).catch(function(e){var t="Invalid server response";a._debug("_api_call",`${r} failed: 9 (${t})`),n({code:9,message:t,data:data})});else{a._debug("_api_call",`${r} failed: 7 (Server error)`),n({code:7,message:"Server error",data:data})}}).catch(function(e){a._debug("_api_call",`${r} failed: 7 (Server error)`),n({code:7,message:"Server error",data:null})})})}_heartbeat(me,on_login){return new Promise(function(resolve,reject){on_login&&(me._last_ping=null);var q={};if(on_login&&(q.icvars=1),me.ws_mode&&(null!==me._last_ping&&(null===me._last_pong||me._last_ping-me._last_pong>me._intervals.heartbeat)&&(me._debug("heartbeat","error: ws ping timeout"),me._invoke_handler("heartbeat.error")),!on_login&&me.ws)){me._last_ping=Date.now()/1e3;try{me._debug("heartbeat","ws ping"),me.ws.send(JSON.stringify({s:"ping"}))}catch(e){return me._debug("heartbeat","error: unable to send ws ping"),me._invoke_handler("heartbeat_error",e),void reject()}}me.call("test",q).then(function(data){me.server_info=data,me.tsdiff=(new Date).getTime()/1e3-data.time,on_login&&(data.cvars?(me._cvars=data.cvars,me.global_cvars&&Object.keys(data.cvars).map(function(k){void 0!==global&&eval(`global.${k}="${data.cvars[k]}"`),"undefined"!=typeof window&&eval(`window.${k}="${data.cvars[k]}"`)})):me._cvars={}),me._invoke_handler("heartbeat.success"),resolve(!0)}).catch(function(e){me._debug("heartbeat","error: unable to send test API call"),me._invoke_handler("heartbeat.error",e)}),me._debug("heartbeat","ok")})}_load_log_entries(e,t){if(!t)t=this;t.ws_mode&&(t._lr2p=[]),t.call("log_get",{l:t.log.level,n:t.log.records}).then(function(r){t.ws_mode&&t._log_first_load&&t._set_ws_log_level(t.log.level),r.map(e=>t._invoke_handler("log.record",e)),t._log_loaded=!0,t._lr2p.map(e=>t._invoke_handler("log.record",e)),e&&t._invoke_handler("log.postprocess"),t._log_first_load=!1}).catch(function(e){jsaltt.logger.error("unable to load log entries")})}_schedule_restart(){var e=this;e._scheduled_restarter=setTimeout(function(){e.start()},1e3*e._intervals.restart)}_cancel_scheduled_restart(){this._scheduled_restarter&&(clearTimeout(this._scheduled_restarter),this._scheduled_restarter=null)}_stop_engine(){if(this._clear(),this._heartbeat_reloader&&(clearInterval(this._heartbeat_reloader),this._heartbeat_reloader=null),this._ajax_reloader&&(clearInterval(this._ajax_reloader),this._ajax_reloader=null),this._log_reloader&&(clearInterval(this._log_reloader),this._log_reloader=null),this.ws)try{this.ws.onclose=null,this.ws.onerror=function(){},this.ws.close()}catch(t){var e=this.ws;setTimeout(function(){try{e.close()}catch(e){}},1e3)}}_prepare_call_params(e){var t=e||{};return this.api_token&&(t.k=this.api_token),t}_set_token_cookie(){this.set_auth_cookies&&"undefined"!=typeof document&&["/ui","/pvt","/rpvt"].map(e=>document.cookie=`auth=${this.api_token}; path=${e}`,this)}_load_states(e){if(!e)e=this;return new Promise(function(t,r){if(e.state_updates){var o={};if(!0!==e.state_updates){var a=e.state_updates.g,s=e.state_updates.p;a&&(o.g=a),s&&(o.p=s)}e.call("state_all",o).then(function(r){r.map(t=>e._process_state(t)),t(!0)}).catch(function(e){r(e)})}else t(!0)})}_start_ws(){var e=this;return new Promise(function(t,r){if(e.ws_mode){var o;if(e.api_uri)o=e.api_uri;else{var a=window.location;o="https:"===a.protocol?"wss:":"ws:",o+="//"+a.host}e.ws=new WebSocket(`${o}/ws?k=${e.api_token}`),e.ws.onmessage=function(t){e._process_ws(t)},e.ws.addEventListener("open",function(t){var r;if(e._debug("_start_ws","ws connected"),e.state_updates&&(r={s:"state"},!0!==e.state_updates)){var o=e.state_updates.g;o||(o="#");var a=e.state_updates.p;a||(a="#"),r.g=o,r.tp=a,r.i=[]}r&&e.ws.send(JSON.stringify(r)),e._log_subscribed&&e.log_level(e.log.level)})}t(!0)})}_set_ws_log_level(e){this._log_subscribed=!0;try{this.ws&&this.ws.send(JSON.stringify({s:"log",l:e}))}catch(e){this._debug("log_level","warning: unable to send ws packet")}}_process_ws(e){var t=JSON.parse(e.data);return"pong"==t.s?(this._debug("ws","pong"),void(this._last_pong=Date.now()/1e3)):"reload"==t.s?(this._debug("ws","reload"),this._invoke_handler("server.reload")):"server"==t.s&&"restart"==t.d?(this._debug("ws","server_restart"),this._invoke_handler("server.restart")):!1!==this._invoke_handler("ws.event",t)?"state"==t.s?(this._debug("ws","state"),void(Array.isArray(t.d)?t.d.map(e=>this._process_state(e),this):this._process_state(t.d))):"log"==t.s?(Array.isArray(t.d)?t.d.map(e=>this._preprocess_log_record(e),this):this._preprocess_log_record(t.d),void this._invoke_handler("log.postprocess")):void 0:void 0}_preprocess_log_record(e){this._log_loaded?this._invoke_handler("log.record",e):this._lr2p.push(e)}_process_state(state){var z=[],x=[];try{var oid=state.oid;if(oid in this._states){var old_state=this._states[oid];z="",Object.keys(old_state).map(function(e){e in state||(state[e]=old_state[e])})}this._states[oid]=state,jsaltt.cmp(state,old_state)||(this._debug("process_state",`${oid} s: ${state.status} v: "${state.value}"`,`ns: ${state.nstatus} nv: "${state.nvalue}"`),oid in this._update_state_functions&&this._update_state_functions[oid].map(function(f){try{"string"==typeof f||f instanceof String?eval(f):f(state)}catch(e){jsaltt.logger.error(`state function processing for ${oid}:`,e)}}),Object.keys(this._update_state_mask_functions).map(function(k){this._oid_match(oid,k)&&this._update_state_mask_functions[k].map(function(f){try{"string"==typeof f||f instanceof String?eval(f):f(state)}catch(e){jsaltt.logger.error(`state function processing for ${oid}:`,e)}})},this))}catch(e){jsaltt.logger.error("State processing error, invalid object received",e)}}_invoke_handler(handler){var f=this._handlers[handler];if(f){this._debug("invoke_handler","invoking for "+handler);try{if("string"==typeof f)return eval(f);if("function"==typeof f)return f.apply(this,[].slice.call(arguments,1))}catch(e){jsaltt.logger.error(`handler for ${handler}:`,e)}}}_oid_match(e,t){return new RegExp("^"+t.split("*").join(".*")+"$").test(e)}_debug(e){this.debug&&jsaltt.logger.debug.apply(jsaltt.logger,["EVA::"+e].concat([].slice.call(arguments,1)))}}let $eva=new EVA;exports.EVA=EVA,exports.$eva=$eva,"object"==typeof window&&(window.$eva=$eva,window.eva_framework_version=eva_framework_version)})()}).call(this,__webpack_require__(1),__webpack_require__(4))},function(e,t){var r,o,a=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{o="function"==typeof clearTimeout?clearTimeout:n}catch(e){o=n}}();var l,c=[],_=!1,d=-1;function u(){_&&l&&(_=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!_){var e=i(u);_=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,_=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===n||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||_||i(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.prependListener=f,a.prependOnceListener=f,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){(()=>{if(void 0!==e&&"browser"!==e.title)var o=r(7);class a{constructor(){this.log=console.log,this.colored=void 0!==o||"undefined"!=typeof window}_msg(e,t){if(arguments.length>2){var r=[].slice.call(arguments,2);if(this.colored){var o=[];if(t)r.map(function(e){e&&e.stack&&e.message||"object"==typeof e?o.push(e):o.push(t(e))});else{for(var a,s=!!e,n=0;n<r.length;n++){var i=r[n];!s||i&&i.stack&&i.message||"object"==typeof i?(s&&(s=!1,o.push(a),o.push(e)),o.push(i),a=null):(a?a+=" ":a="%c",a+=i)}a&&(o.push(a),o.push(e))}r=o}console.log.apply(null,r)}}debug(){var e,t;void 0===o?e="font-size: 12px; color: #999":t=o.gray,this._msg.apply(this,[e,t].concat(Array.from(arguments)))}info(){var e,t;void 0!==o||(e="font-size: 12px; color: black"),this._msg.apply(this,[e,t].concat(Array.from(arguments)))}warning(){var e,t;void 0===o?e="font-size: 14px; color: orange; font-weight: bold":t=o.bold.yellow,this._msg.apply(this,[e,t].concat(Array.from(arguments)))}error(){var e,t;void 0===o?e="font-size: 16px; color: red; font-weight: bold":t=o.bold.red,this._msg.apply(this,[e,t].concat(Array.from(arguments)))}critical(){var e,t;void 0===o?e="font-size: 25px; color: red; font-weight: bold":t=o.bold.red,this._msg.apply(this,[e,t].concat(Array.from(arguments)))}}let s=new a;t.logger=s,t.Logging=a,t.extend=function(){var e=function(){var t={},r=!1,o=0,a=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(r=arguments[0],o++);for(var s=function(o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r&&"[object Object]"===Object.prototype.toString.call(o[a])?t[a]=e(!0,t[a],o[a]):t[a]=o[a])};o<a;o++)s(arguments[o]);return t};return e.apply(null,arguments)},t.cmp=function(e,t){if(void 0===e||void 0===t)return!1;var r=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(r.length!=o.length)return!1;for(var a=0;a<r.length;a++){var s=r[a];if(!Array.isArray(e[s])&&e[s]!==t[s])return!1}return!0},"object"==typeof window&&(window.$log=s)})()}).call(this,r(1))},function(e,t,r){r(0),r(9)},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){e.exports=node-fetch},function(e,t){e.exports=ws},function(e,t){e.exports=chalk},function(e,t,r){"use strict";(()=>{function e(e,t,r,o){if("undefined"!=typeof document){var a,s=void 0!==o?o:"";if(r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),a=n.toUTCString()}else a="";return document.cookie=`${e}=${t}; expires=${a}; path=${s}`,!0}}function r(e){if("undefined"!=typeof document){for(var t=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var a=r[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}}function o(t,r){return e(t,"",-1,r)}t.read=r,t.create=e,t.erase=o,"object"==typeof window&&(window.$cookies={read:r,create:e,erase:o})})()},function(e,t,r){"use strict";(()=>{r(0);const e=r(2);function o(t,r,o,s,n){var i=function(){var s,l=e.extend({},l);s="object"==typeof o?o:o.split(",");var c=l.timeframe;c||(c="1D");var _=l.fill;_||(_="30T:2");var d=l.update,u=l.prop,h=document.getElementById(t),p=l.u,f=null;if(n&&(f=n),void 0!==n&&(h.offsetWidth<=0||h.offsetHeight<=0))f&&f.destroy();else{var v=new Date;"T"==c[c.length-1]?v.setMinutes(v.getMinutes()-c.substring(0,c.length-1)):"H"==c[c.length-1]?v.setHours(v.getHours()-c.substring(0,c.length-1)):"D"==c[c.length-1]&&v.setHours(v.getHours()-24*c.substring(0,c.length-1)),n||a(t);var g="value";null!=u&&(g=u),$eva.call("state_history",s,{t:"iso",s:v.toISOString(),x:g,w:_}).then(function(t){if(f){f.data.labels=t.t;for(var o=0;o<s.length;o++)f.data.datasets[o].data=t[s[o]+"/"+g];f.update()}else{var a=document.createElement("canvas");a.style.width="100%",a.style.height="100%",a.className="eva_toolbox_chart";var n=e.extend({},r);n.data.labels=t.t;for(o=0;o<s.length;o++)n.data.datasets[o].data=t[s[o]+"/"+g];h.innerHTML="",h.appendChild(a),f=new Chart(a,n),p&&(n.options.tooltips.callbacks.label=function(e){return e.yLabel+p})}}).catch(function(e){var t=document.createElement("div");t.className="eva_toolbox_chart",t.style.cssText="width: 100%; height: 100%; color: red; font-weight: bold; font-size: 14px",t.innerHTML="Error loading chart data: "+e.message,h.innerHTML="",h.appendChild(t),f&&f.destroy(),f=null}),d&&setTimeout(function(){i(t,r,s,l,f)},1e3*d)}};i()}function a(e){document.getElementById(e).innerHTML='<div class="eva-toolbox-cssload-square"><div       class="eva-toolbox-cssload-square-part       eva-toolbox-cssload-square-green"></div><div       class="eva-toolbox-cssload-square-part       eva-toolbox-cssload-square-pink"></div><div       class="eva-toolbox-cssload-square-blend"></div></div>'}function s(e,t){(t=t)||(t={});var r=t.url;r||(r=document.location);var o=t.user;void 0===o&&(o=$eva.authorized_user);var a=t.password;void 0===a&&(a=$eva.password);var s=t.size;if(s||(s=200),!r||!o)return!1;var n=document.createElement("a");n.href=r;var i=n.protocol.substring(0,n.protocol.length-1),l=n.hostname,c=n.port;c||(c="http"==i?80:443);var _="scheme:"+i+"|address:"+l+"|port:"+c+"|user:"+o;return a&&(_+="|password:"+a),new QRious({element:document.getElementById(e),value:_,size:s})}function n(e,t,r,o,a){return(a=a)||(a={}),new Promise(function(s,n){if("undfined"===document)throw Error("DOM is required");var i=document.getElementById(e);if(null==i)throw Error(`DOM context ${e} not found`);var l=a.ct,c=a.btn1,_=a.btn2,d=a.va,u=t;"!"==t[0]&&(u=t.substr(1));var h=function(e){return"info"==e?20:"warning"==e?30:"error"==e?40:0};if(i&&h(i.priority)>h(u))throw Error("popup with higher priority is already active");i&&(clearInterval(i.ticker),document.removeEventListener("keydown",i.key_listener)),i.innerHTML="",i.priority=u,i.className="eva_toolbox_popup";var p=document.createElement("div");i.appendChild(p),"!"==t[0]?p.className="eva_toolbox_popup_window_big":p.className="eva_toolbox_popup_window";var f=document.createElement("div");f.className="eva_toolbox_popup_header eva_toolbox_popup_header_"+u,f.innerHTML=null!=r?r:u.charAt(0).toUpperCase()+u.slice(1),p.append(f);var v=document.createElement("div");v.className="eva_toolbox_popup_content",v.innerHTML=o,p.appendChild(v);var g=document.createElement("div");g.className="eva_toolbox_popup_footer",p.appendChild(g);var m=document.createElement("div");m.className="row",p.appendChild(m);var b=document.createElement("div"),w=document.createElement("div"),y=document.createElement("div");y.className="col-xs-1 col-sm-2",m.appendChild(y),m.appendChild(b),m.appendChild(w),(y=document.createElement("div")).className="col-xs-1 col-sm-2",m.appendChild(y);var k="OK";c&&(k=c);var x=document.createElement("div");x.className="eva_toolbox_popup_btn eva_toolbox_popup_btn_"+u,x.innerHTML=k;var j,$=function(){clearInterval(i.ticker),document.getElementById(e).style.display="none",document.getElementById(e).innerHTML="",document.removeEventListener("keydown",i.key_listener),i.priority=null},T=function(){(void 0===d||null==d||d())&&($(),s(!0))};if(x.addEventListener("click",T),b.appendChild(x),_?((j=document.createElement("div")).className="eva_toolbox_popup_btn eva_toolbox_popup_btn_"+u,j.innerHTML=_,j.addEventListener("click",function(){$(),n(!0)}),w.appendChild(j),b.className+=" col-xs-5 col-sm-4",w.className+=" col-xs-5 col-sm-4"):(b.className+=" col-xs-10 col-sm-8",w.style.display="none"),i.style.display="block",i.key_listener=function(e){27==e.which&&($(),n(),e.preventDefault()),13==e.which&&(T(),e.preventDefault())},document.addEventListener("keydown",i.key_listener),l&&l>0){i.ct=l;var E=function(){var e;i.ct<=0&&($(),n());var t="";j?(e=j,t=_):(e=x,t=k),e.innerHTML=`${t} (${i.ct})`,i.ct-=1};E(),i.ticker=setInterval(E,1e3)}})}"object"==typeof $eva&&($eva.toolbox||($eva.toolbox={}),$eva.toolbox.chart=o,$eva.toolbox.animate=a,$eva.toolbox.hiQR=s,$eva.toolbox.popup=n),t.chart=o,t.animate=a,t.hiQR=s,t.popup=n})()}]);